apiVersion: v1
kind: ConfigMap
metadata:
  name: trino-hive-catalog
  namespace: trino
data:
  hive.properties: |
    connector.name=hive
    hive.metastore.uri=thrift://hive-metastore.hive-metastore.svc.cluster.local:9083

    hive.metastore.warehouse.dir=s3a://data/warehouse/

    # Native Trino S3-style config (optional fallback)
    hive.s3.aws-access-key=minioadmin
    hive.s3.aws-secret-key=minioadmin
    hive.s3.endpoint=http://minio.minio.svc.cluster.local:9000
    hive.s3.path-style-access=true
    hive.s3.region=us-east-1
    hive.s3.ssl.enabled=false

    # Hadoop-compatible S3A config (required for Hive connector to access Parquet)
    fs.s3.impl=org.apache.hadoop.fs.s3a.S3AFileSystem
    fs.s3a.access.key=minioadmin
    fs.s3a.secret.key=minioadmin
    fs.s3a.endpoint=http://minio.minio.svc.cluster.local:9000
    fs.s3a.path.style.access=true
    fs.s3a.connection.ssl.enabled=false

    # Optional performance/config tuning
    fs.s3a.impl.disable.cache=true
